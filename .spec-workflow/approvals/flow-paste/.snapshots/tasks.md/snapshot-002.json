{
  "id": "snapshot_1766065969256_37c9rrk3u",
  "approvalId": "approval_1766065946500_6gyxfpliz",
  "approvalTitle": "FlowPaste Tasks Document (31 Tasks)",
  "version": 2,
  "timestamp": "2025-12-18T13:52:49.256Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document - FlowPaste (MVP v1.0)\n\n## Phase 1: Project Scaffolding\n\n- [ ] 1. Initialize Tauri + Vue 3 project\n  - Files: `package.json`, `vite.config.ts`, `src-tauri/Cargo.toml`, `src-tauri/tauri.conf.json`\n  - Initialize Tauri 2.x project with Vue 3 + TypeScript template\n  - Configure TailwindCSS and essential plugins\n  - Set up project structure according to design document\n  - _Leverage: Tauri CLI, Vite, TailwindCSS_\n  - _Requirements: REQ-01 (foundation)_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: DevOps Engineer specializing in Tauri and Vue ecosystem | Task: Initialize Tauri 2.x + Vue 3 + TypeScript project with TailwindCSS, configure vite.config.ts and tauri.conf.json following the design document file structure | Restrictions: Use Tauri 2.x (not 1.x), Vue 3 Composition API only, do not add unnecessary dependencies | _Leverage: Official Tauri CLI templates | Success: Project builds successfully, dev server runs, Tauri window opens with Vue app | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 2. Define TypeScript interfaces\n  - File: `src/types/index.ts`\n  - Define ActionChip, PrivacyStatus, PIIItem, Rule, AIConfig interfaces\n  - Ensure type compatibility with Rust structs via Tauri IPC\n  - _Leverage: design.md Data Models section_\n  - _Requirements: All (type foundation)_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: TypeScript Developer specializing in type systems | Task: Create comprehensive TypeScript interfaces matching Rust structs defined in design.md (ActionChip, PrivacyStatus, PIIItem, MaskMapping, Rule, AIConfig, ErrorResponse) | Restrictions: Types must be serializable for Tauri IPC, use strict typing, no any types | _Leverage: design.md Data Models section | Success: All interfaces defined with proper typing, compatible with Tauri invoke/listen API | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n---\n\n## Phase 2: Backend Core Modules (Rust)\n\n- [ ] 3. Implement Clipboard Module\n  - Files: `src-tauri/src/clipboard/mod.rs`, `src-tauri/src/clipboard/manager.rs`\n  - Implement read_clipboard() and write_clipboard() using arboard crate\n  - Create Tauri command wrappers\n  - _Leverage: arboard crate_\n  - _Requirements: REQ-02, REQ-03_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with systems programming expertise | Task: Implement clipboard module with read_clipboard() returning Result<String, ClipboardError> and write_clipboard(content: &str) using arboard crate, expose as Tauri commands | Restrictions: Handle clipboard access errors gracefully, do not panic on failure, support both Windows and macOS | _Leverage: arboard crate documentation | Success: Can read/write clipboard via Tauri commands, proper error handling | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 4. Implement Config Manager with SQLite\n  - Files: `src-tauri/src/config/mod.rs`, `src-tauri/src/config/store.rs`\n  - Set up SQLite database for app configuration\n  - Implement load_config() and save_config() functions\n  - Create config table schema\n  - _Leverage: rusqlite crate_\n  - _Requirements: REQ-01 (hotkey config), REQ-08, REQ-09 (AI config)_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with database expertise | Task: Implement config manager using rusqlite - create SQLite database in app data dir, config table (key TEXT PRIMARY KEY, value TEXT, updated_at INTEGER), implement load_config/save_config with AppConfig struct | Restrictions: Use Tauri's app data directory, handle database errors properly, use prepared statements | _Leverage: rusqlite crate, Tauri path API | Success: Config persists across app restarts, CRUD operations work correctly | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 5. Implement Keychain Integration\n  - File: `src-tauri/src/config/keychain.rs`\n  - Integrate with OS keychain (Windows Credential Locker / macOS Keychain)\n  - Implement get_api_key() and set_api_key() functions\n  - _Leverage: keyring crate_\n  - _Requirements: REQ-09 (secure credential storage)_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with security expertise | Task: Implement keychain integration using keyring crate - get_api_key(provider: &str) and set_api_key(provider: &str, key: &str), use \"flow-paste\" as service name | Restrictions: Never log or expose API keys, handle keychain access errors, support both Windows and macOS | _Leverage: keyring crate documentation | Success: API keys stored securely in OS keychain, retrievable across sessions | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 6. Implement Regex Engine with Built-in Rules\n  - Files: `src-tauri/src/regex/mod.rs`, `src-tauri/src/regex/rules.rs`\n  - Define Rule struct and built-in rules (remove empty lines, trim whitespace, etc.)\n  - Implement apply_rule() and get_builtin_rules() functions\n  - _Leverage: regex crate_\n  - _Requirements: REQ-05_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer | Task: Implement regex engine - Rule struct (id, name, description, pattern, replacement, is_builtin), apply_rule(text, rule) using regex crate, get_builtin_rules() returning 5 rules: remove_empty_lines, trim_whitespace, cjk_spacing, to_plain_text, collapse_spaces | Restrictions: Rules must complete within 50ms, handle invalid regex gracefully, use lazy_static for compiled patterns | _Leverage: regex crate | Success: All 5 built-in rules work correctly, performance under 50ms | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 7. Implement Privacy Shield - PII Scanner\n  - Files: `src-tauri/src/privacy/mod.rs`, `src-tauri/src/privacy/scanner.rs`, `src-tauri/src/privacy/patterns.rs`\n  - Define PII patterns (phone, email, ID card, bank card, IP, API key)\n  - Implement scan_pii() returning PIIScanResult\n  - _Leverage: regex crate, design.md patterns_\n  - _Requirements: REQ-10_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with security expertise | Task: Implement PII scanner - define regex patterns in patterns.rs for CN mobile (1[3-9]\\d{9}), email, CN ID card (18 digits), bank card (16-19 digits), IPv4, API keys (sk-...), implement scan_pii(text) returning PIIScanResult with detected items and positions | Restrictions: Patterns must be accurate with low false positives, use lazy_static for compiled patterns, handle overlapping matches | _Leverage: regex crate | Success: All 6 PII types detected accurately, returns correct positions | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 8. Implement Privacy Shield - Masker and Restorer\n  - File: `src-tauri/src/privacy/masker.rs`\n  - Implement mask_pii() replacing sensitive data with {{TYPE_ID}} placeholders\n  - Implement restore_pii() to rehydrate placeholders\n  - _Leverage: Task 7 scanner_\n  - _Requirements: REQ-11_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer | Task: Implement PII masking - mask_pii(text, scan_result) replacing each PII with {{TYPE_ID}} format (e.g., {{PHONE_01}}), return (masked_text, MaskMapping), implement restore_pii(text, mapping) to replace placeholders back to original values | Restrictions: Maintain correct replacement order, handle nested/overlapping cases, mapping must be memory-only (never persist) | _Leverage: scanner.rs from Task 7 | Success: Round-trip mask->restore preserves original text exactly | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 9. Implement AI Engine - OpenAI Compatible Client\n  - Files: `src-tauri/src/ai/mod.rs`, `src-tauri/src/ai/openai.rs`\n  - Implement streaming completion API client\n  - Support configurable base_url for OpenAI/DeepSeek/compatible APIs\n  - _Leverage: reqwest crate, tokio_\n  - _Requirements: REQ-09, REQ-07_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with async programming expertise | Task: Implement OpenAI-compatible streaming client - complete(prompt, config) using reqwest with SSE parsing, support configurable base_url and model, stream tokens via Tauri events, handle API errors with ErrorResponse | Restrictions: Use async/await with tokio, implement proper timeout (30s), handle rate limits and auth errors | _Leverage: reqwest, tokio, serde_json | Success: Streaming responses work with OpenAI and DeepSeek APIs, proper error handling | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 10. Implement AI Engine - Ollama Client\n  - File: `src-tauri/src/ai/ollama.rs`\n  - Implement Ollama API client with model listing\n  - Support local model detection and streaming\n  - _Leverage: reqwest crate, Ollama API spec_\n  - _Requirements: REQ-08_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer | Task: Implement Ollama client - list_local_models() calling /api/tags, complete(prompt, config) calling /api/generate with streaming, detect Ollama availability via connection test | Restrictions: Handle Ollama not running gracefully, default base_url http://localhost:11434, support model switching | _Leverage: Ollama API documentation, reqwest | Success: Can list local models, streaming works, graceful handling when Ollama offline | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 11. Implement AI Engine - Intent Detection\n  - File: `src-tauri/src/ai/intent.rs`\n  - Implement detect_intent() to analyze clipboard content\n  - Generate ActionChip recommendations based on content type\n  - _Leverage: AI clients from Tasks 9-10_\n  - _Requirements: REQ-06_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with ML/NLP background | Task: Implement intent detection - detect_intent(text) analyzing content type (JSON, code, prose, table), return Vec<ActionChip> with 1-3 contextual recommendations, use heuristics first (regex for JSON/code detection) then optional AI enhancement | Restrictions: Heuristic detection must be under 10ms, ActionChips include shortcut keys '1','2','3' | _Leverage: regex for pattern matching | Success: Correct content type detection, relevant action recommendations | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 12. Implement Hotkey Module\n  - Files: `src-tauri/src/hotkey/mod.rs`, `src-tauri/src/hotkey/manager.rs`\n  - Register global hotkey using Tauri global-shortcut plugin\n  - Support custom hotkey configuration\n  - _Leverage: Tauri global-shortcut plugin, Config Manager_\n  - _Requirements: REQ-01_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with Tauri expertise | Task: Implement hotkey module using tauri-plugin-global-shortcut - register_hotkey(keys) parsing accelerator string, unregister_hotkey(), emit \"panel-toggle\" event on trigger, load default from config (CommandOrControl+Shift+V) | Restrictions: Handle hotkey conflicts gracefully, support re-registration on config change | _Leverage: tauri-plugin-global-shortcut | Success: Global hotkey triggers panel toggle, custom hotkeys work | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 13. Create Tauri Command Layer\n  - File: `src-tauri/src/commands/mod.rs`, `clipboard.rs`, `ai.rs`, `config.rs`\n  - Expose all backend functions as Tauri commands\n  - Implement proper error serialization\n  - _Leverage: All backend modules_\n  - _Requirements: All backend requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with Tauri expertise | Task: Create Tauri command layer - #[tauri::command] wrappers for: read_clipboard, process_with_rule, process_with_ai, scan_pii, mask_and_process, get_config, set_config, get_api_key, set_api_key, list_models, register commands in main.rs | Restrictions: All commands must return Result<T, String> for JS compatibility, use serde for serialization | _Leverage: All backend modules | Success: All commands callable from frontend via invoke() | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n---\n\n## Phase 3: Frontend Components (Vue 3)\n\n- [ ] 14. Create Pinia Store\n  - File: `src/stores/app.ts`\n  - Implement useAppStore with all state and actions from design\n  - Connect to Tauri IPC for backend calls\n  - _Leverage: Pinia, design.md State Management section_\n  - _Requirements: All frontend requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer with Pinia expertise | Task: Implement useAppStore following design.md - state (isVisible, panelMode, clipboardContent, processedContent, streamingContent, actionChips, privacyStatus, maskedMapping), actions (showPanel, hidePanel, processWithRule, processWithAI, confirmPaste) calling Tauri invoke | Restrictions: Use Composition API setup syntax, handle async errors properly | _Leverage: Pinia, @tauri-apps/api | Success: Store manages all app state, Tauri commands called correctly | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 15. Create Tauri IPC Wrapper\n  - File: `src/lib/tauri.ts`\n  - Create typed wrappers for all Tauri invoke calls\n  - Set up event listeners for streaming responses\n  - _Leverage: @tauri-apps/api, TypeScript interfaces_\n  - _Requirements: All (IPC foundation)_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: TypeScript Developer | Task: Create typed IPC wrapper - export functions: readClipboard(), processWithRule(ruleId), processWithAI(prompt), getConfig(), setConfig(), etc., use invoke<T>() with proper typing, set up listen() for streaming events | Restrictions: All functions must be properly typed, handle IPC errors uniformly | _Leverage: @tauri-apps/api/core | Success: Type-safe IPC calls, streaming events handled | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 16. Implement FloatingPanel Component\n  - File: `src/components/FloatingPanel.vue`\n  - Create Spotlight-style floating panel container\n  - Handle panel visibility and keyboard navigation\n  - _Leverage: TailwindCSS, Pinia store_\n  - _Requirements: REQ-01, UI Design 4.1_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer with UI expertise | Task: Implement FloatingPanel.vue - centered 600px width container, backdrop blur, rounded corners, shadow, dark/light mode support via Tailwind dark: classes, handle Esc to close, keyboard event delegation to child components | Restrictions: Must follow Spotlight aesthetic, no window chrome, smooth animations | _Leverage: TailwindCSS, useAppStore | Success: Panel appears centered with proper styling, responds to keyboard | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 17. Implement CommandInput Component\n  - File: `src/components/CommandInput.vue`\n  - Create input field for natural language commands\n  - Handle Enter to submit, keyboard shortcuts\n  - _Leverage: TailwindCSS_\n  - _Requirements: REQ-07, UI Design 4.2_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement CommandInput.vue - borderless input with placeholder \"Describe format or choose below...\", emit submit on Enter, expose focus method, handle disabled state during processing | Restrictions: Auto-focus on mount, clean minimal styling | _Leverage: TailwindCSS | Success: Input works with proper focus management and submit handling | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 18. Implement Preview Component\n  - File: `src/components/Preview.vue`\n  - Display clipboard content preview and processed results\n  - Support streaming output with typewriter effect\n  - _Leverage: shiki for syntax highlighting_\n  - _Requirements: REQ-02, UI Design 4.2_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement Preview.vue - props (content, mode: preview|result|streaming, highlight), show first 3 lines in preview mode (gray text), full content in result mode, typewriter animation in streaming mode, optional syntax highlighting via shiki | Restrictions: Limit preview to 3 lines, handle long content with ellipsis, smooth streaming animation | _Leverage: shiki, TailwindCSS | Success: All three modes render correctly, streaming looks smooth | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 19. Implement ActionChips Component\n  - File: `src/components/ActionChips.vue`\n  - Display AI-recommended action buttons\n  - Handle selection via click and number keys (1, 2, 3)\n  - _Leverage: TailwindCSS_\n  - _Requirements: REQ-06, UI Design 4.2_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement ActionChips.vue - props (chips: ActionChip[], selectedIndex), render chips as pill buttons with shortcut prefix [1. Label], emit select on click or number key, highlight selected chip, support keyboard navigation | Restrictions: Max 3 chips, show shortcut keys clearly, accessible focus states | _Leverage: TailwindCSS | Success: Chips render correctly, keyboard selection works | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 20. Implement PrivacyIndicator Component\n  - File: `src/components/PrivacyIndicator.vue`\n  - Display privacy shield status icon\n  - Show tooltip with masked item count\n  - _Leverage: TailwindCSS_\n  - _Requirements: REQ-12, UI Design 4.2_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement PrivacyIndicator.vue - props (status: local|cloud-safe|cloud-masked, maskedCount), render shield icon üõ°Ô∏è with color (green for local, blue for cloud-safe, yellow for cloud-masked), tooltip on hover showing status text and masked count | Restrictions: Small footprint, positioned bottom-right, non-intrusive | _Leverage: TailwindCSS | Success: Icon displays correct color/tooltip for all states | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 21. Create Composables\n  - Files: `src/composables/useClipboard.ts`, `useHotkey.ts`, `useAI.ts`\n  - Implement reusable composition functions\n  - Encapsulate Tauri IPC logic\n  - _Leverage: Tauri IPC wrapper, Pinia store_\n  - _Requirements: All frontend requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement composables - useClipboard() for read/paste operations, useHotkey() for listening to panel-toggle events, useAI() for AI processing with streaming support, all using Tauri IPC wrapper | Restrictions: Properly handle component lifecycle (onMounted/onUnmounted), clean up event listeners | _Leverage: @tauri-apps/api, Pinia | Success: Composables encapsulate logic cleanly, reusable across components | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 22. Assemble App.vue with All Components\n  - File: `src/App.vue`\n  - Integrate all components into main app\n  - Handle global keyboard events and panel lifecycle\n  - _Leverage: All components, Pinia store, composables_\n  - _Requirements: All UI requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement App.vue - use FloatingPanel as root, integrate CommandInput, Preview, ActionChips, PrivacyIndicator, connect to useAppStore, handle global keyboard (Esc to close, number keys for chips, Enter to confirm), manage panel state transitions | Restrictions: Clean component composition, proper event handling | _Leverage: All components and composables | Success: Full UI workflow works end-to-end | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n---\n\n## Phase 4: Integration & Polish\n\n- [ ] 23. Implement Paste-to-Cursor Functionality\n  - File: `src-tauri/src/clipboard/manager.rs` (extend)\n  - Implement keyboard simulation for pasting at cursor\n  - Support both keyboard simulation and clipboard API\n  - _Leverage: enigo crate or platform APIs_\n  - _Requirements: REQ-03_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust Developer with systems programming expertise | Task: Extend clipboard manager - implement paste_to_cursor(text) that writes to clipboard then simulates Ctrl/Cmd+V keystroke using enigo crate, handle platform differences (Windows/macOS) | Restrictions: Must work across different applications, handle focus properly | _Leverage: enigo crate | Success: Text pastes at cursor position in target app | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 24. Configure Tauri Window Settings\n  - File: `src-tauri/tauri.conf.json`\n  - Configure transparent, frameless window\n  - Set up window positioning and always-on-top behavior\n  - _Leverage: Tauri window configuration_\n  - _Requirements: UI Design 4.1_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: DevOps Engineer with Tauri expertise | Task: Configure tauri.conf.json - transparent window, frameless (decorations: false), resizable: false, width: 600, alwaysOnTop: true, center: true, visible: false (show via code), skipTaskbar: true | Restrictions: Must work on both Windows and macOS | _Leverage: Tauri documentation | Success: Window appears as floating panel with correct behavior | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 25. Implement Dark/Light Mode Support\n  - Files: `src/App.vue`, `tailwind.config.js`\n  - Detect system theme preference\n  - Apply dark/light styles throughout UI\n  - _Leverage: TailwindCSS dark mode, Tauri theme API_\n  - _Requirements: UI Design 4.1_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Frontend Developer | Task: Implement theme support - configure Tailwind darkMode: 'class', detect system preference via window.matchMedia or Tauri theme API, apply dark class to html element, ensure all components use dark: variants | Restrictions: Respect system preference, smooth transition when theme changes | _Leverage: TailwindCSS, prefers-color-scheme | Success: UI correctly follows system theme | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 26. Add Error Handling UI\n  - File: `src/components/ErrorDisplay.vue` (new)\n  - Create error display component with shake animation\n  - Handle retry and dismiss actions\n  - _Leverage: TailwindCSS animations_\n  - _Requirements: UI Design 4.3_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement ErrorDisplay.vue - props (error: ErrorResponse), show red error message, shake animation on appear, retry button if error.recoverable, dismiss button, emit retry/dismiss events | Restrictions: Non-blocking (user can still close panel), accessible error messages | _Leverage: TailwindCSS animate-shake | Success: Errors display clearly with appropriate actions | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 27. Implement Settings Panel\n  - File: `src/components/SettingsPanel.vue` (new)\n  - Create settings UI for API configuration\n  - Handle hotkey customization\n  - _Leverage: Pinia store, Tauri config commands_\n  - _Requirements: REQ-01, REQ-08, REQ-09_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Vue Developer | Task: Implement SettingsPanel.vue - form for: hotkey input, AI provider select (openai/ollama), base_url input, API key input (password type), model select, save/cancel buttons, validation feedback | Restrictions: API key input must be masked, validate URLs, test connection before save | _Leverage: useAppStore, Tauri config commands | Success: Settings save correctly, API connection testable | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n---\n\n## Phase 5: Testing & Finalization\n\n- [ ] 28. Write Rust Unit Tests\n  - Files: `src-tauri/src/*/mod.rs` (test modules)\n  - Test PII detection patterns\n  - Test regex rules\n  - Test mask/restore round-trip\n  - _Leverage: Rust test framework_\n  - _Requirements: All backend requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer with Rust expertise | Task: Write unit tests - test_phone_detection, test_email_detection, test_all_pii_types, test_mask_restore_roundtrip, test_builtin_rules, test_config_persistence | Restrictions: Test edge cases, use test fixtures, maintain test isolation | _Leverage: #[cfg(test)] modules | Success: All tests pass, good coverage of core logic | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 29. Write Vue Component Tests\n  - Files: `src/components/__tests__/*.spec.ts`\n  - Test component rendering and interactions\n  - Test Pinia store actions\n  - _Leverage: Vitest, Vue Test Utils_\n  - _Requirements: All frontend requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer with Vue testing expertise | Task: Write component tests using Vitest + Vue Test Utils - test FloatingPanel visibility toggle, CommandInput submit handling, ActionChips keyboard selection, Preview mode switching, store action side effects | Restrictions: Mock Tauri IPC calls, test user interactions | _Leverage: Vitest, @vue/test-utils | Success: All component tests pass, interactions verified | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 30. End-to-End Integration Test\n  - File: `tests/e2e/flow.spec.ts`\n  - Test complete user flow: hotkey ‚Üí select ‚Üí paste\n  - Test AI processing flow with mock\n  - _Leverage: Playwright, Tauri Driver_\n  - _Requirements: All requirements_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Automation Engineer | Task: Write E2E tests using Playwright + Tauri - test_basic_flow (trigger hotkey, verify panel, select action, verify paste), test_ai_flow (input command, verify streaming, confirm result), test_privacy_flow (verify PII masking indicator) | Restrictions: Use Tauri test driver, handle async properly | _Leverage: @playwright/test, tauri-driver | Success: E2E tests pass, critical flows verified | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n\n- [ ] 31. Final Integration and Build Configuration\n  - Files: `package.json`, `src-tauri/tauri.conf.json`\n  - Configure production build settings\n  - Set up app icons and metadata\n  - Test release build on Windows/macOS\n  - _Leverage: Tauri build system_\n  - _Requirements: All_\n  - _Prompt: Implement the task for spec flow-paste, first run spec-workflow-guide to get the workflow guide then implement the task: Role: DevOps Engineer | Task: Finalize build config - set app identifier (com.flowpaste.app), configure icons (1024x1024 source), set version 1.0.0, configure Windows installer and macOS DMG, test npm run tauri build on both platforms | Restrictions: Ensure code signing ready (even if not signed yet), optimize bundle size | _Leverage: Tauri build documentation | Success: Release builds work on Windows and macOS | Before starting: Mark this task as [-] in tasks.md | After completion: Use log-implementation tool to record artifacts, then mark as [x] in tasks.md_\n",
  "fileStats": {
    "size": 31817,
    "lines": 272,
    "lastModified": "2025-12-18T13:52:17.090Z"
  },
  "comments": []
}